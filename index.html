<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda Mágica do Tempo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
        }
        
        .time-slot {
            transition: all 0.3s ease;
        }
        
        .current-time {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(99, 102, 241, 0); }
            100% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0); }
        }
    </style>
</head>
<body class="bg-gray-900 min-h-screen">
<div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <header class="mb-8 text-center">
            <h1 class="text-4xl font-bold text-indigo-400 mb-2">Agenda Mágica do Tempo</h1>
            <p class="text-gray-400">Veja minha disponibilidade em tempo real</p>
            
            <!-- Day selection buttons -->
            <div class="flex justify-center space-x-2 my-4">
                <button onclick="showDay('Domingo')" class="px-3 py-1 bg-gray-700 text-gray-300 rounded hover:bg-indigo-600 transition">Dom</button>
                <button onclick="showDay('Segunda-feira')" class="px-3 py-1 bg-gray-700 text-gray-300 rounded hover:bg-indigo-600 transition">Seg</button>
                <button onclick="showDay('Terça-feira')" class="px-3 py-1 bg-gray-700 text-gray-300 rounded hover:bg-indigo-600 transition">Ter</button>
                <button onclick="showDay('Quarta-feira')" class="px-3 py-1 bg-gray-700 text-gray-300 rounded hover:bg-indigo-600 transition">Qua</button>
                <button onclick="showDay('Quinta-feira')" class="px-3 py-1 bg-gray-700 text-gray-300 rounded hover:bg-indigo-600 transition">Qui</button>
                <button onclick="showDay('Sexta-feira')" class="px-3 py-1 bg-gray-700 text-gray-300 rounded hover:bg-indigo-600 transition">Sex</button>
                <button onclick="showDay('Sábado')" class="px-3 py-1 bg-gray-700 text-gray-300 rounded hover:bg-indigo-600 transition">Sáb</button>
            </div>
            
            <div class="mt-4 p-4 bg-gray-800 rounded-lg shadow-sm">
<div class="flex justify-center items-center space-x-4">
                    <div class="text-center">
                        <div class="text-2xl font-bold text-indigo-600" id="current-day">Segunda-feira</div>
                        <div class="text-gray-500" id="current-date">1 de Janeiro de 2023</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-indigo-600" id="current-time">00:00</div>
                <div class="text-gray-500">Horário de Brasília (UTC-3)</div>
</div>
                </div>
            </div>
        </header>

        <!-- Status Bar -->
        <div class="mb-8 p-4 bg-gray-800 rounded-lg shadow-sm">
<div class="flex items-center justify-center">
                <div class="mr-4">
                    <div class="text-sm text-gray-400">Status Atual</div>
<div class="text-xl font-bold" id="current-status">Carregando...</div>
                </div>
                <div id="status-indicator" class="h-4 w-4 rounded-full bg-gray-300"></div>
            </div>
        </div>

        <!-- Schedule Table -->
        <div class="bg-gray-800 rounded-lg shadow-sm overflow-hidden">
<div class="grid grid-cols-1 divide-y">
                <!-- Schedule items will be inserted here by JavaScript -->
            </div>
        </div>

        <!-- Legend -->
        <div class="mt-6 flex justify-center space-x-4">
            <div class="flex items-center">
                <div class="h-4 w-4 rounded-full bg-green-500 mr-2"></div>
                <span class="text-sm text-gray-600">Disponível</span>
            </div>
            <div class="flex items-center">
                <div class="h-4 w-4 rounded-full bg-red-500 mr-2"></div>
                <span class="text-sm text-gray-600">Ocupado</span>
            </div>
            <div class="flex items-center">
                <div class="h-4 w-4 rounded-full bg-indigo-500 mr-2 current-time"></div>
                <span class="text-sm text-gray-600">Agora</span>
            </div>
        </div>
    </div>

    <script>
        // Sample schedule data (in real app, this would come from a database)
        const schedule = [
            { 
                days: ['Segunda-feira'], 
                start: '17:00', 
                end: '20:30', 
                activity: 'Ministrando aula', 
                status: 'Ocupado' 
            },
            {
                days: ['Terça-feira'], 
                start: '16:00', 
                end: '19:30', 
                activity: 'Ministrando aula', 
                status: 'Ocupado' 
            },
            {
              days: ['Quarta-feira'], 
                start: '17:00', 
                end: '20:30', 
                activity: 'Ministrando aula', 
                status: 'Ocupado' 
            },
            { 
                days: ['Quinta-feira'], 
                start: '20:00', 
                end: '21:30', 
                activity: 'Ministrando aula', 
                status: 'Ocupado' 
            },
            { 
                days: ['Sexta-feira'], 
                start: '14:00', 
                end: '15:30', 
                activity: 'Ministrando aula', 
                status: 'Ocupado' 
            },
            { 
                days: ['Sexta-feira'], 
                start: '17:00', 
                end: '20:30', 
                activity: 'Ministrando aula', 
                status: 'Ocupado' 
            },
            { 
                days: ['Terça-feira', 'Quarta-feira', 'Quinta-feira'], 
                start: '08:00', 
                end: '12:00', 
                activity: 'Na Faculdade', 
                status: 'Ocupado' 
            }
            
        ];

        // Days of week in Portuguese
        const daysOfWeek = ['Domingo', 'Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sábado'];
        
        // Months in Portuguese
        const months = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];

        // Update current time and day
        function updateDateTime() {
            const now = new Date();
            // Brasil UTC-3 (no verão UTC-2)
            const brasiliaOffset = -3 * 60; // UTC-3 em minutos
            const brasiliaTime = new Date(now.getTime() + (now.getTimezoneOffset() * 60000) + (brasiliaOffset * 60000));
// Update day and date
            const dayName = daysOfWeek[brasiliaTime.getDay()];
            const dateStr = `${brasiliaTime.getDate()} de ${months[brasiliaTime.getMonth()]} de ${brasiliaTime.getFullYear()}`;
            document.getElementById('current-day').textContent = dayName;
            document.getElementById('current-date').textContent = dateStr;
            
            // Update time
            const hours = brasiliaTime.getHours().toString().padStart(2, '0');
            const minutes = brasiliaTime.getMinutes().toString().padStart(2, '0');
            document.getElementById('current-time').textContent = `${hours}:${minutes}`;
            
            // Check current status
            checkCurrentStatus(brasiliaTime, dayName);
            
            // Update schedule display
            updateScheduleDisplay(dayName, brasiliaTime);
        }

        // Check current status (available or busy)
        function checkCurrentStatus(now, currentDay) {
            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();
            const currentTime = currentHour * 60 + currentMinute;
            
            let isBusy = false;
            let currentActivity = '';
            
            // Check all schedule items
            for (const item of schedule) {
                if (item.days.includes(currentDay)) {
                    const startParts = item.start.split(':');
                    const endParts = item.end.split(':');
                    
                    const startTime = parseInt(startParts[0]) * 60 + parseInt(startParts[1]);
                    const endTime = parseInt(endParts[0]) * 60 + parseInt(endParts[1]);
                    
                    if (currentTime >= startTime && currentTime <= endTime) {
                        isBusy = true;
                        currentActivity = item.activity;
                        break;
                    }
                }
            }
            
            // Update status display
            const statusElement = document.getElementById('current-status');
            const indicatorElement = document.getElementById('status-indicator');
            
            if (isBusy) {
                statusElement.textContent = `Ocupado (${currentActivity})`;
                statusElement.className = 'text-xl font-bold text-red-500';
                indicatorElement.className = 'h-4 w-4 rounded-full bg-red-500';
            } else {
                statusElement.textContent = 'Disponível';
                statusElement.className = 'text-xl font-bold text-green-500';
                indicatorElement.className = 'h-4 w-4 rounded-full bg-green-500';
            }
        }
        // Function to show selected day
        function showDay(dayName) {
            const now = new Date();
            const brasiliaOffset = -3 * 60;
            let brasiliaTime = new Date(now.getTime() + (now.getTimezoneOffset() * 60000) + (brasiliaOffset * 60000));
            
            // Calculate the target day
            const currentDayIndex = brasiliaTime.getDay();
            const targetDayIndex = daysOfWeek.indexOf(dayName);
            let dayDiff = targetDayIndex - currentDayIndex;
            
            // If the target day is before current day in week, add 7 days
            if (dayDiff < 0) {
                dayDiff += 7;
            }
            
            // Create new date for the target day
            brasiliaTime = new Date(brasiliaTime);
            brasiliaTime.setDate(brasiliaTime.getDate() + dayDiff);
            
            // Update display
            document.getElementById('current-day').textContent = dayName;
            const dateStr = `${brasiliaTime.getDate()} de ${months[brasiliaTime.getMonth()]} de ${brasiliaTime.getFullYear()}`;
            document.getElementById('current-date').textContent = dateStr;
            
            updateScheduleDisplay(dayName, brasiliaTime);
            checkCurrentStatus(brasiliaTime, dayName);
        }
// Update the schedule display for the current day
        function updateScheduleDisplay(currentDay, now) {
const scheduleContainer = document.querySelector('.grid.grid-cols-1.divide-y');
            scheduleContainer.innerHTML = '';
            
            // Filter schedule items for today
            const todaySchedule = schedule.filter(item => item.days.includes(currentDay));
            
            // If no scheduled items for today, show available all day
            if (todaySchedule.length === 0) {
                const itemElement = document.createElement('div');
                itemElement.className = 'p-4 text-center';
                itemElement.innerHTML = `
                    <div class="text-green-500 font-medium">Disponível o dia todo</div>
                `;
                scheduleContainer.appendChild(itemElement);
                return;
            }
            
            // Sort schedule by start time
            todaySchedule.sort((a, b) => {
                const aStart = parseInt(a.start.split(':')[0]) * 60 + parseInt(a.start.split(':')[1]);
                const bStart = parseInt(b.start.split(':')[0]) * 60 + parseInt(b.start.split(':')[1]);
                return aStart - bStart;
            });
            
            // Create time slots for the day (from 8:00 to 22:00)
            const startHour = 8;
            const endHour = 22;
            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();
            const currentTime = currentHour * 60 + currentMinute;
            
            for (let hour = startHour; hour <= endHour; hour++) {
                for (let minute = 0; minute < 60; minute += 30) {
                    if (hour === endHour && minute === 30) break; // Stop at 22:00
                    
                    const slotStart = hour * 60 + minute;
                    const slotEnd = hour * 60 + minute + 30;
                    const timeStr = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
                    
                    // Check if this time slot is busy
                    let isBusy = false;
                    let activity = '';
                    
                    for (const item of todaySchedule) {
                        const itemStartParts = item.start.split(':');
                        const itemEndParts = item.end.split(':');
                        
                        const itemStart = parseInt(itemStartParts[0]) * 60 + parseInt(itemStartParts[1]);
                        const itemEnd = parseInt(itemEndParts[0]) * 60 + parseInt(itemEndParts[1]);
                        
                        if (slotStart >= itemStart && slotEnd <= itemEnd) {
                            isBusy = true;
                            activity = item.activity;
                            break;
                        }
                    }
                    
                    // Create time slot element
                    const slotElement = document.createElement('div');
                    slotElement.className = 'p-4 time-slot';
                    
                    // Check if this is the current time slot
                    const isCurrent = currentTime >= slotStart && currentTime < slotEnd;
                    
                    if (isCurrent) {
                        slotElement.classList.add('current-time');
                        slotElement.classList.add('border-l-4', 'border-indigo-500');
                    }
                    
                    if (isBusy) {
                        slotElement.innerHTML = `
                            <div class="flex justify-between items-center">
                                <div class="text-red-500 font-medium">${timeStr} - Ocupado</div>
                                <div class="text-red-400">${activity}</div>
                            </div>
                        `;
                    } else {
                        slotElement.innerHTML = `
                            <div class="flex justify-between items-center">
                                <div class="text-green-500 font-medium">${timeStr} - Disponível</div>
                                <div class="text-green-400">Livre</div>
                            </div>
                        `;
                    }
                    
                    scheduleContainer.appendChild(slotElement);
                }
            }
        }
        // Dark mode toggle
        function toggleDarkMode() {
            document.body.classList.toggle('bg-gray-900');
            document.body.classList.toggle('bg-gray-50');
            
            const elements = document.querySelectorAll('.bg-white, .text-gray-600, .text-gray-500');
            elements.forEach(el => {
                if (el.classList.contains('bg-white')) {
                    el.classList.toggle('bg-white');
                    el.classList.toggle('bg-gray-800');
                }
                if (el.classList.contains('text-gray-600')) {
                    el.classList.toggle('text-gray-600');
                    el.classList.toggle('text-gray-400');
                }
                if (el.classList.contains('text-gray-500')) {
                    el.classList.toggle('text-gray-500');
                    el.classList.toggle('text-gray-400');
                }
            });
        }

        // Add dark mode toggle button
        const darkModeButton = document.createElement('button');
        darkModeButton.className = 'fixed bottom-4 right-4 bg-gray-800 text-white p-3 rounded-full shadow-lg';
        darkModeButton.innerHTML = '<i data-feather="moon"></i>';
        darkModeButton.onclick = toggleDarkMode;
        document.body.appendChild(darkModeButton);
        
        // Initialize and update every minute
        feather.replace();
        updateDateTime();
        setInterval(updateDateTime, 60000);
</script>
</body>
</html>